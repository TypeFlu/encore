<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="styles/index.css" type="text/css" rel="stylesheet" />
    <script type="module" src="scripts/webui_utils.js"></script>
    <script type="module" src="scripts/block_copy.js"></script>
    <script type="module" src="scripts/mmrl.js"></script>
    <script type="module" src="scripts/language.js"></script>
  </head>

  <body class="bg-surface flex justify-center min-h-screen root_layout">
    <main class="p-3 text-sm w-full max-w-2xl">
      <!-- Header -->
      <div class="flex justify-between items-center mb-6 text-on-surface">
        <h1 class="text-lg font-semibold">Encore Tweaks</h1>
        <div>
          <select id="languageSelector" class="select select-sm bg-surface-container text-on-surface">
            <option value="en">English</option>
            <option value="id">Indonesia</option>
            <option value="jv">Basa Jawa</option>
            <option value="ru">Русский</option>
            <option value="es">Español</option>
            <option value="nl">Nederlands</option>
            <option value="tl">Tagalog</option>
            <option value="da">Dansk</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="zh">简体中文</option>
            <option value="ms">Bahasa Melayu</option>
            <option value="pt">Português</option>
            <option value="ro">Română</option>
            <option value="fr">Français</option>
            <option value="tr">Türkçe</option>
            <option value="ja">日本語</option>
            <option value="th">ภาษาไทย</option>
            <option value="ko">한국어</option>
            <option value="vi">Tiếng Việt</option>
            <option value="hi">हिन्दी</option>
            <option value="ar">اَلْعَرَبِيَّةُ</option>
            <option value="pl">Polski</option>
          </select>
        </div>
      </div>

      <!-- Daemon Status -->
      <div class="bg-secondary-container mb-4 p-4 rounded-lg flex items-start justify-between text-on-secondary-container">
        <div>
          <span id="daemon_status" class="text-lg font-semibold">Loading</span>
          <span id="daemon_pid" class="text-xs mt-3 block">One moment please...</span>
        </div>
        <img id="encore_logo" class="w-24 h-24" />
      </div>

      <!-- Device & Module Info -->
      <div class="bg-surface-container mb-4 p-4 rounded-lg text-on-surface">
        <div class="py-2">
          <h3 data-i18n="moduleTitle" class="text-sm font-medium mb-1"></h3>
          <span id="module_version" class="text-on-surface-variant text-xs"></span>
        </div>
        <div class="py-2">
          <h3 data-i18n="profileTitle" class="text-sm font-medium mb-1"></h3>
          <span id="encore_profile" class="text-on-surface-variant text-xs"></span>
        </div>
        <div class="py-2">
          <h3 data-i18n="kernelTitle" class="text-sm font-medium mb-1"></h3>
          <span id="kernel_version" class="text-on-surface-variant text-xs"></span>
        </div>
        <div class="py-2">
          <h3 data-i18n="chipsetTitle" class="text-sm font-medium mb-1"></h3>
          <span id="chipset_name" class="text-on-surface-variant text-xs"></span>
        </div>
        <div class="py-2">
          <h3 data-i18n="androidSDKTitle" class="text-sm font-medium mb-1"></h3>
          <span id="android_sdk" class="text-on-surface-variant text-xs"></span>
        </div>
      </div>

      <!-- Settings -->
      <div class="bg-surface-container mb-4 p-4 rounded-lg text-on-surface">
        <h2 data-i18n="settingsTitle" class="text-base font-semibold mb-2"></h2>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="dndGameplay"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="dnd_gameplay.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="dnd_switch" type="checkbox" class="peer sr-only" />
            <label for="dnd_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="liteMode"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="lite_mode.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="lite_mode_switch" type="checkbox" class="peer sr-only" />
            <label for="lite_mode_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="deviceMitigation"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="device_mitigation.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="device_mitigation_switch" type="checkbox" class="peer sr-only" />
            <label for="device_mitigation_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2" data-i18n="defaultCpuGov"></p>
          <select id="default_cpu_gov" class="select bg-primary text-xs text-on-primary w-full p-2">
            <option value="schedutil" selected>schedutil</option>
          </select>
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2" data-i18n="powersaveCpuGov"></p>
          <select id="powersave_cpu_gov" class="select bg-primary text-xs text-on-primary w-full p-2">
            <option value="powersave" selected>powersave</option>
          </select>
        </div>
      </div>

      <!-- Actions -->
      <div class="bg-surface-container mb-4 p-4 rounded-lg">
        <h2 data-i18n="actionsTitle" class="text-base font-semibold mb-4 text-on-surface"></h2>
        <button id="edit_gamelist_btn" class="btn btn-block bg-primary hover:bg-primary text-on-primary py-1 mb-2" onclick="edit_gamelist.showModal()"></button>
        <button id="save_log_btn" class="btn btn-block bg-primary hover:bg-primary text-on-primary py-1 mb-2"></button>
      </div>

      <!-- Donate Button -->
      <button id="donate_btn" class="text-left text-on-surface bg-surface-container mb-4 p-4 rounded-lg w-full active:bg-secondary-container transition duration-300">
        <h2 data-i18n="supportTitle" class="text-base font-semibold px-2 mb-1"></h2>
        <p data-i18n="supportDescription" class="text-sm text-on-surface-variant px-2 mb-1"></p>
      </button>

      <!-- Modals -->
      <dialog id="dnd_gameplay" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="dndTitle" class="text-lg font-bold"></h3>
          <p data-i18n="dndDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="lite_mode" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="liteModeTitle" class="text-lg font-bold"></h3>
          <p data-i18n="liteModeDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="device_mitigation" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="deviceMitigationTitle" class="text-lg font-bold"></h3>
          <p data-i18n="deviceMitigationDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="mmrl_denied" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="permissionDeniedTitle" class="text-lg font-bold"></h3>
          <p data-i18n="permissionDeniedDesc" class="py-4"></p>
          <div class="breadcrumbs text-sm">
            <ul>
              <li data-i18n="breadcrumbsSettings"></li>
              <li data-i18n="breadcrumbsModules"></li>
              <li data-i18n="breadcrumbsEncore"></li>
              <li data-i18n="breadcrumbsAllowAPI"></li>
            </ul>
          </div>
        </div>
      </dialog>

      <dialog id="edit_gamelist" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="editGamelistTitle" class="text-lg font-bold"></h3>
          <p data-i18n="editGamelistDesc" class="py-4"></p>
          <textarea id="gamelist_textarea" class="w-full p-2 text-sm text-on-surface bg-surface-dim border border-primary outline-none shadow-none rounded-md resize-none mb-2" rows="14"></textarea>
          <form method="dialog">
            <button id="save_gamelist_btn" class="btn btn-block btn-sm bg-primary text-on-primary font-normal mb-2 hover:bg-primary duration-300" data-i18n="saveChanges"></button>
            <button class="btn btn-block btn-sm bg-secondary-container text-on-secondary-container font-normal hover:bg-secondary-container duration-300" data-i18n="cancelChanges"></button>
          </form>
        </div>
      </dialog>

      <dialog id="error_modal" class="modal">
        <div class="modal-box bg-surface-container text-on-surface">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 id="error_title" class="text-lg font-bold"></h3>
          <p id="error_msg" class="py-4"></p>
        </div>
      </dialog>
    </main>
  </body>
</html>